syntax = "proto3";

//message body
message Address {
    string flat_no = 1;
    string city = 2;
    string state = 3;
    string country = 4;
}

enum PhoneType {
    PHONE_TYPE_UNSPECIFIED = 0;
    WORK = 1;
    MOBILE = 2;
    HOME = 3;
}

enum Sex {
    SEX_UNSPECIFIED = 0;
    M = 1;
    F = 2;
}

message PhoneNumber {
    string number = 1;
    PhoneType type = 2;
}

message User {
    string username = 1;
    int32 age = 2;
    Sex sex = 3;
    Address addr = 4;
    repeated string emails = 5;
    repeated PhoneNumber phone_numbers = 6;
    string fullname = 7;
}

message UsernameRequest {
    string username = 1;
}

message UpdateUserRequest {
    string username = 1;
    User user = 2;
}

message DeleteUserResponse {
    bool success = 1;
    string message = 2;
}

service UserManagementService {
    // adding rpcs here
    rpc AddUser( User ) returns ( User ); 
    rpc GetUserByUsername( UsernameRequest ) returns (User);
    rpc DeleteUserByUsername( UsernameRequest ) returns ( DeleteUserResponse );
    rpc UpdateUserByUsername(UpdateUserRequest) returns (User);
}
